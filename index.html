<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Argument Analyzer</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://unpkg.com/compromise"></script>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: auto; padding: 20px; }
        textarea { width: 100%; height: 100px; margin-bottom: 10px; }
        button { padding: 10px 20px; font-size: 16px; }
        #output { margin-top: 20px; padding: 10px; background: #f4f4f4; white-space: pre-line; }
    </style>
</head>
<body>
    <h1>AI Argument Analyzer</h1>
    <textarea id="argumentInput" placeholder="Enter your argument here..."></textarea>
    <button onclick="analyzeArgument()">Analyze</button>
    <div id="output"></div>

    <script>
        let model;

        async function loadModel() {
            model = tf.sequential();
            model.add(tf.layers.dense({ inputShape: [50], units: 32, activation: 'relu' }));
            model.add(tf.layers.dense({ units: 16, activation: 'relu' }));
            model.add(tf.layers.dense({ units: 2, activation: 'softmax' }));
            model.compile({ optimizer: 'adam', loss: 'categoricalCrossentropy', metrics: ['accuracy'] });
        }

        function textToVector(text) {
            let vector = new Array(50).fill(0);
            const words = text.toLowerCase().split(" ");
            words.forEach((word, index) => {
                if (index < 50) {
                    vector[index] = word.length;
                }
            });
            return vector;
        }

        async function trainModel() {
            if (!model) await loadModel();
            const trainingData = [
                { input: "If it rains, then the ground is wet. It is raining. Therefore, the ground is wet.", output: [1, 0] },
                { input: "If it rains, then the ground is wet. The ground is wet. Therefore, it is raining.", output: [0, 1] },
                { input: "Most dogs bark. Max is a dog. Therefore, Max probably barks.", output: [1, 0] },
                { input: "Some people from NY are rude. John is from NY. Therefore, John is rude.", output: [0, 1] }
            ];
            const vectorizedData = trainingData.map(d => ({ input: textToVector(d.input), output: d.output }));
            const xs = tf.tensor2d(vectorizedData.map(d => d.input));
            const ys = tf.tensor2d(vectorizedData.map(d => d.output));
            await model.fit(xs, ys, { epochs: 50 });
            console.log("Model training complete!");
        }

        async function analyzeArgumentWithAI(argument) {
            if (!model) await trainModel();
            const vector = tf.tensor2d([textToVector(argument)]);
            const prediction = model.predict(vector);
            const result = await prediction.data();
            return result[0] > result[1] ? "âœ“ AI Analysis: This argument is likely valid." : "X AI Analysis: This argument is likely invalid.";
        }

        async function analyzeArgument() {
            const argument = document.getElementById('argumentInput').value;
            document.getElementById('output').innerText = "Analyzing with AI...";

            let aiResult = await analyzeArgumentWithAI(argument);
            document.getElementById('output').innerText = aiResult;
        }
    </script>
</body>
</html>
